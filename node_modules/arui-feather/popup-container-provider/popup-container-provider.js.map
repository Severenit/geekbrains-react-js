{"version":3,"sources":["popup-container-provider/popup-container-provider.jsx"],"names":["PopupContainerProvider","state","didRender","getChildContext","isInCustomContainer","renderContainerElement","renderContainer","getNode","positioningContainerElement","positioningContainer","componentDidMount","handleContainerDidRender","render","cn","props","id","style","children","setState","Component","propTypes","oneOfType","arrayOf","node","className","string","theme","oneOf","childContextTypes","bool"],"mappings":";;;;mCAAA;;;;AAIA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAgCMA,sB,WADL,kBAAG,iBAAH,C;;;;;;;;;;;;4JAqBGC,K,GAAQ;AACJC,uBAAW,KADP,CACa;AADb,S;;;qCAIRC,e,8BAAkB;AACd,eAAO;AACHC,iCAAqB,IADlB;AAEHC,oCAAyB,KAAKC,eAAL,IAAwB,KAAKA,eAAL,CAAqBC,OAArB,EAF9C;AAGHC,yCAA6B,KAAKC;AAH/B,SAAP;AAKH,K;;qCAEDC,iB,gCAAoB;AAChB,aAAKC,wBAAL;AACH,K;;qCAEDC,M,mBAAOC,E,EAAI;AAAA;;AACP,eACI;AAAA;AAAA;AACI,2BAAYA,IADhB;AAEI,oBAAK,KAAKC,KAAL,CAAWC,EAFpB;AAGI,qBAAM,aAACN,oBAAD,EAA0B;AAAE,2BAAKA,oBAAL,GAA4BA,oBAA5B;AAAmD,iBAHzF;AAII,uBAAQ,KAAKK,KAAL,CAAWE;AAJvB;AAMM,iBAAKF,KAAL,CAAWG,QANjB;AAOI;AACI,qBAAM,aAACX,eAAD,EAAqB;AAAE,2BAAKA,eAAL,GAAuBA,eAAvB;AAAyC;AAD1E;AAPJ,SADJ;AAaH,K;;AAED;;;;;qCAGAK,wB,uCAA2B;AACvB,aAAKO,QAAL,CAAc;AACVhB,uBAAW,IADD,CACM;AADN,SAAd;AAGH,K;;AAED;;;;;;;;qCAMAK,O,sBAAU;AACN,eAAO,KAAKE,oBAAZ;AACH,K;;;EArEgC,gBAAMU,S,WAChCC,S,GAAY;AACf;AACAH,cAAU,oBAAKI,SAAL,CAAe,CAAC,oBAAKC,OAAL,CAAa,oBAAKC,IAAlB,CAAD,EAA0B,oBAAKA,IAA/B,CAAf,CAFK;AAGf;AACAC,eAAW,oBAAKC,MAJD;AAKf;AACAV,QAAI,oBAAKU,MANM;AAOf;AACAT,uCARe;AASf;AACAU,WAAO,oBAAKC,KAAL,CAAW,CAAC,eAAD,EAAkB,eAAlB,CAAX;AAVQ,C,UAaZC,iB,GAAoB;AACvBxB,yBAAqB,oBAAKyB,IADH;AAEvBxB,mDAFuB;AAGvBG;AAHuB,C;kBA0DhBR,sB","file":"popup-container-provider.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport styleType from 'react-style-proptype';\nimport Type from 'prop-types';\n\nimport IsolatedContainer from '../isolated-container/isolated-container';\n\nimport cn from '../cn';\nimport { HtmlElement } from '../lib/prop-types';\n\n/**\n * Становится родительским элементом для всех дочерних блоков `Popup`.\n * Предполагается задавать этому элементу `position: fixed` в стилях.\n *\n * @example\n * ```javascript\n * import PopupContainerProvider from 'arui-feather/popup-container-provider';\n * import Popup from 'arui-feather/popup';\n * import Page from 'arui-feather/page';\n *\n *  <Page>\n *     <PopupContainerProvider\n *         style={\n *             {\n *                 position: 'fixed',\n *                 top: 0,\n *                 right: 0,\n *                 bottom: 0,\n *                 width: '400px',\n *                 overflow: 'auto'\n *             }\n *         }\n *     >\n *         <Popup>\n *             Попап отрендерился в PopupContainerProvider, а не в body\n *             При скролле внутри блока, попап ездит вместе с остальным контентом.\n *         </Popup>\n *     </PopupContainerProvider>\n *  </Page>\n * ```\n */\n@cn('popup-container')\nclass PopupContainerProvider extends React.Component {\n    static propTypes = {\n        /** Дочерние элементы контейнера */\n        children: Type.oneOfType([Type.arrayOf(Type.node), Type.node]),\n        /** Дополнительный класс */\n        className: Type.string,\n        /** Идентификатор компонента в DOM */\n        id: Type.string,\n        /** Объект со стилями */\n        style: styleType,\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white'])\n    };\n\n    static childContextTypes = {\n        isInCustomContainer: Type.bool,\n        renderContainerElement: HtmlElement,\n        positioningContainerElement: HtmlElement\n    };\n\n    state = {\n        didRender: false // eslint-disable-line react/no-unused-state\n    };\n\n    getChildContext() {\n        return {\n            isInCustomContainer: true,\n            renderContainerElement: (this.renderContainer && this.renderContainer.getNode()),\n            positioningContainerElement: this.positioningContainer\n        };\n    }\n\n    componentDidMount() {\n        this.handleContainerDidRender();\n    }\n\n    render(cn) {\n        return (\n            <div\n                className={ cn() }\n                id={ this.props.id }\n                ref={ (positioningContainer) => { this.positioningContainer = positioningContainer; } }\n                style={ this.props.style }\n            >\n                { this.props.children }\n                <IsolatedContainer\n                    ref={ (renderContainer) => { this.renderContainer = renderContainer; } }\n                />\n            </div>\n        );\n    }\n\n    /**\n     * Необходимо для обновления childContext сразу после получения refs.\n     */\n    handleContainerDidRender() {\n        this.setState({\n            didRender: true // eslint-disable-line react/no-unused-state\n        });\n    }\n\n    /**\n     * Возвращает корневой `HTMLElement` компонента.\n     *\n     * @public\n     * @returns {HTMLElement}\n     */\n    getNode() {\n        return this.positioningContainer;\n    }\n}\n\nexport default PopupContainerProvider;\n"]}